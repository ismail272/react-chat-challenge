(this["webpackJsonpchat-challenge"]=this["webpackJsonpchat-challenge"]||[]).push([[0],{10:function(e,t,a){e.exports={chats:"style_chats__FIeVT",inputBlock:"style_inputBlock__kGq1h",search:"style_search__dHGgG",contact:"style_contact__3hgU-",fullName:"style_fullName__GSIho",link:"style_link__1OmgZ",contentBlock:"style_contentBlock__sgupI",lastMessage:"style_lastMessage__1AEao",time:"style_time__1SMXH",deleteSearch:"style_deleteSearch__JKXHD",contactActive:"style_contactActive__jDH1K"}},14:function(e,t,a){e.exports={inbox:"style_inbox__3GHTZ",inboxMessage:"style_inboxMessage__1rm2z",content:"style_content__1pYYo",date:"style_date__1wO4n",outBox:"style_outBox__3AfFv",outBoxMessage:"style_outBoxMessage__j8Y28",wrapDateCheck:"style_wrapDateCheck__2pI3j",dateCheck:"style_dateCheck__3p0us",infoBox:"style_infoBox___AC45"}},21:function(e,t,a){e.exports={form:"style_form__1s9hW",sendForm:"style_sendForm__2cEXW",mediaIcon:"style_mediaIcon__2a6Zx"}},29:function(e,t,a){e.exports={imageBlock:"style_imageBlock__29Dzw",online:"style_online__3TBVT",small:"style_small__2ZJ4e",medium:"style_medium__3eTj8",large:"style_large__1gjtU"}},43:function(e,t,a){e.exports={appWrapper:"style_appWrapper__12-Nj"}},6:function(e,t,a){e.exports={selectChat:"style_selectChat__2fWFp",PreloaderChatMessages:"style_PreloaderChatMessages__ka17A",wrapLoaderAndText:"style_wrapLoaderAndText__1wbKN",preloaderHeader:"style_preloaderHeader__eicaG",loaderHeader:"style_loaderHeader__17umH",autorenewPreloaderHeader:"style_autorenewPreloaderHeader__1Mk81",headLoaderText:"style_headLoaderText__Py45x",messages:"style_messages__3qQ7q",SearchAndInput:"style_SearchAndInput__3Dphg",InputHeaderMessages:"style_InputHeaderMessages__jw9Qe",iconSearchMessages:"style_iconSearchMessages__JghFK",AiOutlineSearch:"style_AiOutlineSearch__3Waox",clear:"style_clear__2te8d",clearSearch:"style_clearSearch__mD1n0",settingsHeaderMessages:"style_settingsHeaderMessages__3CaY2",openProfile:"style_openProfile__1zbno",headerName:"style_headerName__2qlPu",headerNameAndOnline:"style_headerNameAndOnline__2_MXW",messagesHeaderOnline:"style_messagesHeaderOnline__2uH_h",headerMessages:"style_headerMessages__2AJ7l",messagesBody:"style_messagesBody__1Mnfb"}},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var s=a(20),c=a.n(s),n=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,78)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),c(e),n(e),i(e)}))},i=a(3),l=a(28),r=a(5),o={loading:!1,myId:"",openProfile:!1};var d={filter:"",items:[],loading:!0};var j=function(e){return{type:"filter/set",payload:e}},u=a(44),m=function(){var e=document.getElementById("chat-window");e&&(e.scrollTop=e.scrollHeight)},b={filter:"",loading:!0,opened:null,items:[]};var _=function(e){return{type:"filter/messages",payload:e}},O=a(39),h=a(40),f=Object(h.createLogger)({diff:!0,collapsed:!0}),v=Object(l.c)(Object(l.b)({application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/toggle":return Object(r.a)(Object(r.a)({},e),{},{openProfile:!e.openProfile});case"load/profile/start":return Object(r.a)(Object(r.a)({},e),{},{loading:!0});case"load/profile/success":return Object(r.a)(Object(r.a)({},e),{},{loading:!1,myId:t.payload._id});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"load/messages/start":return Object(r.a)(Object(r.a)({},e),{},{loading:!0,opened:t.payload});case"load/messages/success":return Object(r.a)(Object(r.a)({},e),{},{loading:!1,items:t.payload});case"send/message/start":var a=Object(r.a)(Object(r.a)({},t.payload),{},{sending:!0});return Object(r.a)(Object(r.a)({},e),{},{items:[].concat(Object(u.a)(e.items),[a])});case"send/message/success":return Object(r.a)(Object(r.a)({},e),{},{items:e.items.map((function(e){return e.ranId===t.payload.ranId?Object(r.a)(Object(r.a)({},e),{},{sending:!1}):e}))});case"filter/messages":return Object(r.a)(Object(r.a)({},e),{},{filter:t.payload});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"contacts/load/start":return Object(r.a)(Object(r.a)({},e),{},{loading:!0});case"contacts/load/success":return Object(r.a)(Object(r.a)({},e),{},{items:t.payload,loading:!1});case"filter/set":return Object(r.a)(Object(r.a)({},e),{},{filter:t.payload});default:return e}}}),Object(l.a)(O.a,f)),p=a(18),x=a(8),g=a(2),y=a(22),N=a.n(y),M=a(67),I=a(29),k=a.n(I),C=a(1);function S(e){var t=e.size,a=e.fullname,s=e.online;return Object(C.jsx)("div",{className:k.a.imageBlock,children:Object(C.jsxs)("div",{className:k.a[t],children:[null===a||void 0===a?void 0:a.fullname[0],s?Object(C.jsx)(M.a,{className:k.a.online}):""]})})}S.defaultProps={size:"medium",online:!1};var w=S,A=a(10),B=a.n(A);var H=function(e){var t,a,s,c=e.contact,n=Object(x.e)()._id;return Object(C.jsx)(p.b,{className:B.a.link,to:"/".concat(c._id),children:Object(C.jsxs)("div",{className:"".concat(B.a.contact,"\n        ").concat(c._id===n&&B.a.contactActive),children:[Object(C.jsx)(w,{size:"medium",fullname:c,online:c.online}),Object(C.jsxs)("div",{className:B.a.contentBlock,children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:B.a.fullName,children:c.fullname}),Object(C.jsx)("div",{className:B.a.lastMessage,children:(s=null===(t=c.lastMessage)||void 0===t?void 0:t.content,(null===s||void 0===s?void 0:s.length)>10?s.substring(0,10)+"...":s)})]}),Object(C.jsx)("div",{className:B.a.time,children:N()(null===(a=c.lastMessage)||void 0===a?void 0:a.time).format("hh:mm")})]})]})})},P=a(26),T=a.n(P);var F=function(){return[1,2,3,4,5,6,7,8,9].map((function(e){return Object(C.jsxs)("div",{className:B.a.contact,children:[Object(C.jsx)(T.a,{width:50,height:50,circle:!0}),Object(C.jsxs)("div",{className:B.a.contentBlock,children:[Object(C.jsxs)("div",{className:B.a.fullNameLastMessage,children:[Object(C.jsx)("div",{className:B.a.fullName,children:Object(C.jsx)(T.a,{width:200,height:10})}),Object(C.jsx)("div",{className:B.a.lastMessage,children:Object(C.jsx)(T.a,{width:150,height:10})})]}),Object(C.jsx)("div",{className:B.a.time,children:Object(C.jsx)(T.a,{width:35,height:10})})]})]},e)}))},L=a(19),D=a(68),E=a(69);var z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.contacts.filter}));return Object(L.a)("shift+t",(function(){e(j(""))})),Object(C.jsx)("div",{className:B.a.inputBlock,children:Object(C.jsxs)("div",{className:B.a.search,children:[Object(C.jsx)("div",{className:"icon",children:Object(C.jsx)(D.c,{})}),Object(C.jsx)("input",{type:"text",placeholder:"Search contact",onChange:function(t){t.preventDefault(),e(j(t.target.value))},value:t}),Object(C.jsx)("div",{className:B.a.deleteSearch,onClick:function(){e(j(""))},children:t?Object(C.jsx)(E.b,{}):""})]})})};var W=function(){var e=Object(i.c)((function(e){return e.contacts.loading})),t=Object(i.c)((function(e){var t=e.contacts.filter;return e.contacts.items.filter((function(e){var a;return-1!==(null===(a=e.fullname)||void 0===a?void 0:a.toUpperCase().indexOf(t.toUpperCase()))}))})),a=Object(i.b)();return Object(g.useEffect)((function(){a((function(e){e({type:"contacts/load/start"}),fetch("https://api.intocode.ru:8001/api/contacts").then((function(e){return e.json()})).then((function(t){e({type:"contacts/load/success",payload:t})}))}))}),[a]),Object(C.jsxs)("div",{className:B.a.chats,children:[Object(C.jsx)(z,{}),e?Object(C.jsx)(F,{}):t.map((function(e){return Object(C.jsx)(H,{contact:e},e._id)}))]})},G=a(14),J=a.n(G);var q=function(e){var t=e.message,a=Object(x.e)()._id,s=Object(i.c)((function(e){return e.contacts.items.find((function(e){return e._id===a}))}));return Object(C.jsxs)("div",{className:J.a.inbox,children:[Object(C.jsx)(w,{size:"small",fullname:s}),Object(C.jsxs)("div",{className:J.a.inboxMessage,children:[Object(C.jsx)("div",{className:J.a.content,children:t.content}),Object(C.jsx)("div",{className:J.a.date,children:Object(C.jsx)("div",{children:N()(t.time).format("hh:mm")})})]})]})},U=a(71),X=a(70),Y=function(e){return e.isRead?Object(C.jsx)(X.b,{}):Object(C.jsx)(X.a,{})};var Z=function(e){var t=e.message;return Object(C.jsx)("div",{className:J.a.outBox,children:Object(C.jsxs)("div",{className:J.a.outBoxMessage,children:[Object(C.jsx)("div",{className:J.a.content,children:t.content}),Object(C.jsxs)("div",{className:J.a.dateCheck,children:[Object(C.jsx)("div",{className:J.a.date,children:N()(t.time).format("hh:mm")}),t.sending?Object(C.jsx)(U.a,{}):Object(C.jsx)(Y,{read:t.read})]})]})})};var K=function(e){var t=e.message,a=Object(i.c)((function(e){return e.application.myId}));return t.toUserId===a?Object(C.jsx)(q,{message:t}):Object(C.jsx)(Z,{message:t})};var Q=function(e){var t=e.content;return Object(C.jsx)("div",{className:J.a.infoBox,children:t})};var V=function(e){var t=e.message;return"text"===t.type?Object(C.jsx)(K,{message:t}):Object(C.jsx)(Q,{content:t.content})},R=a(6),$=a.n(R);var ee=function(){var e=Object(i.c)((function(e){return e.messages})),t=e.loading,a=e.items,s=e.filter,c=a.filter((function(e){return e.content.toLowerCase().includes(s.toLowerCase())}));return Object(C.jsx)("div",{className:$.a.messagesBody,id:"chat-window",children:!t&&c.map((function(e){return Object(C.jsx)(V,{message:e},e._id)}))})},te=a(45),ae=a(76),se=a(21),ce=a.n(se);var ne=function(){return Object(C.jsx)("button",{className:ce.a.mediaIcon,children:Object(C.jsx)(D.b,{})})},ie=a(72),le=a(77),re=a(73),oe=a(74);var de=function(e){var t=e.message,a=e.sentMessage;return Object(C.jsx)("button",{className:"send click",children:Object(C.jsx)(ie.a,{children:Object(C.jsx)(le.a,{timeout:100,classNames:"sendIcon",children:Object(C.jsx)("div",{className:ce.a.mediaIcon,onClick:a,children:t?Object(C.jsx)(re.a,{}):Object(C.jsx)(oe.a,{})})},t)})})};var je=function(){var e=Object(i.b)(),t=Object(x.e)()._id,a=Object(i.c)((function(e){return e.application.myId})),s=Object(g.useState)(""),c=Object(te.a)(s,2),n=c[0],l=c[1],o=function(){0!==(null===n||void 0===n?void 0:n.length)&&(e(function(e,t,a){return function(s){var c=Math.floor(100*Math.random())+1;s({type:"send/message/start",payload:{ranId:c,contactId:t,myId:e,content:a,type:"text"}}),fetch("https://api.intocode.ru:8001/api/messages",{method:"POST",body:JSON.stringify({myId:e,contactId:t,content:a,type:"text"}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){s({type:"send/message/success",payload:Object(r.a)({ranId:c},e)}),m()}))}}(t,a,n)),l(""))};return Object(L.a)("shift+enter",(function(e){e.preventDefault(),l((function(e){return e+"\n"}))})),Object(L.a)("enter",(function(e){e.preventDefault(),o()}),[n]),Object(C.jsxs)("div",{className:ce.a.form,children:[Object(C.jsx)(ae.a,{onChange:function(e){l(e.target.value)},value:n,className:ce.a.sendForm,placeholder:"Write a message...",maxrows:"5"}),Object(C.jsx)(ne,{}),Object(C.jsx)(de,{sentMessage:o,message:(null===n||void 0===n?void 0:n.length)>0})]})};var ue=function(){return Object(C.jsxs)("div",{className:$.a.wrapLoaderAndText,children:[Object(C.jsx)("div",{className:$.a.preloaderHeader,children:Object(C.jsx)(E.a,{className:$.a.autorenewPreloaderHeader})}),Object(C.jsx)("div",{className:$.a.headLoaderText,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0447\u0430\u0442\u0430"})]})};var me=function(){var e=Object(x.e)()._id,t=Object(i.c)((function(t){return t.contacts.items.find((function(t){return e===t._id}))}));return Object(C.jsxs)("div",{className:$.a.headerNameAndOnline,children:[Object(C.jsx)("div",{className:$.a.headerName,children:null===t||void 0===t?void 0:t.fullname}),Object(C.jsx)("div",{children:(null===t||void 0===t?void 0:t.online)?Object(C.jsx)(M.a,{className:$.a.messagesHeaderOnline}):""})]})};var be=function(e){var t=e.filter,a=Object(i.b)();return Object(L.a)("shift+x",(function(){a(_(""))})),Object(C.jsx)("div",{className:$.a.clear,children:Object(C.jsx)("span",{onClick:function(){a(_(""))},children:t?Object(C.jsx)(E.b,{className:$.a.clearSearch}):""})})},_e=a(75);var Oe=function(){var e=Object(i.b)();return Object(L.a)("shift+p",(function(){e({type:"profile/toggle"})})),Object(C.jsx)("div",{className:$.a.settingsHeaderMessages,children:Object(C.jsx)(_e.a,{className:$.a.openProfile,onClick:function(){e({type:"profile/toggle"})}})})};var he=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.messages.loading})),a=Object(i.c)((function(e){return e.messages.filter}));return Object(C.jsxs)("div",{className:$.a.headerMessages,children:[Object(C.jsxs)("div",{className:$.a.SearchAndInput,children:[Object(C.jsx)("div",{className:$.a.iconSearchMessages,children:Object(C.jsx)(D.c,{className:$.a.AiOutlineSearch})}),Object(C.jsx)("div",{className:$.a.InputHeaderMessages,children:Object(C.jsx)("input",{type:"text",onChange:function(t){e(_(t.target.value))},value:a,placeholder:"Search"})}),Object(C.jsx)(be,{filter:a})]}),t?Object(C.jsx)(ue,{}):Object(C.jsx)(me,{}),Object(C.jsx)(Oe,{})]})};var fe=function(){var e=Object(i.b)(),t=Object(x.e)()._id,a=Object(i.c)((function(e){return e.application.myId}));return Object(g.useEffect)((function(){t&&e(function(e,t){return function(a){a({type:"load/messages/start",payload:t}),fetch("https://api.intocode.ru:8001/api/messages/".concat(e,"/").concat(t)).then((function(e){return e.json()})).then((function(e){a({type:"load/messages/success",payload:e}),m()}))}}(a,t))}),[e,t,a]),t?Object(C.jsxs)("div",{className:$.a.messages,children:[Object(C.jsx)(he,{}),Object(C.jsx)(ee,{}),Object(C.jsx)(je,{})]}):Object(C.jsx)("div",{className:$.a.selectChat,children:Object(C.jsx)("div",{className:$.a.PreloaderChatMessages,children:"Select a chat to start messaging"})})},ve=a(7),pe=a.n(ve);var xe=function(){return Object(C.jsxs)("div",{className:pe.a.profileContactIcons,children:[Object(C.jsx)("div",{className:pe.a.phone,children:Object(C.jsx)(re.b,{})}),Object(C.jsx)("div",{className:pe.a.videoCam,children:Object(C.jsx)(re.c,{})}),Object(C.jsx)("div",{className:pe.a.envelope,children:Object(C.jsx)(M.b,{})})]})};var ge=function(e){var t=e.socials;return Object(C.jsxs)("div",{className:pe.a.profileSocial,children:[Object(C.jsx)("div",{className:pe.a.headSocial,children:"Social"}),Object(C.jsx)("div",{className:pe.a.messenger,children:Object(C.jsx)("div",{className:pe.a.wrapMessenger,children:Object(C.jsxs)("div",{children:[(null===t||void 0===t?void 0:t.socials)?Object(C.jsxs)("div",{className:pe.a.IconsAndSocialNickname,children:[Object(C.jsx)(D.a,{}),Object(C.jsx)("span",{children:null===t||void 0===t?void 0:t.socials.instagram})]}):"",(null===t||void 0===t?void 0:t.socials)?Object(C.jsxs)("div",{className:pe.a.IconsAndSocialNickname,children:[Object(C.jsx)(D.d,{}),Object(C.jsx)("span",{children:null===t||void 0===t?void 0:t.socials.twitter})]}):"",(null===t||void 0===t?void 0:t.socials)?Object(C.jsxs)("div",{className:pe.a.IconsAndSocialNickname,children:[Object(C.jsx)(M.c,{}),Object(C.jsx)("span",{children:null===t||void 0===t?void 0:t.socials.facebook})]}):""]})})})]})};var ye=function(){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:pe.a.headMedia,children:"Media"}),Object(C.jsxs)("div",{className:pe.a.ImgPdfMedia,children:[Object(C.jsx)("div",{className:pe.a.imgMedia}),Object(C.jsx)("div",{className:pe.a.pdf,children:"desktop-chat.pdf"})]})]})};var Ne=function(){var e=Object(x.e)()._id,t=Object(i.c)((function(e){return e.application.openProfile})),a=Object(i.c)((function(t){return t.contacts.items.find((function(t){return e===t._id}))}));return Object(C.jsxs)("div",{className:t?pe.a.profileOpen:pe.a.profileClose,children:[Object(C.jsxs)("div",{children:[Object(C.jsx)(w,{size:"large",fullname:a}),Object(C.jsxs)("div",{className:pe.a.profileNameEmail,children:[Object(C.jsx)("div",{className:pe.a.profileName,children:null===a||void 0===a?void 0:a.fullname}),Object(C.jsxs)("div",{className:pe.a.nick,children:["@",null===a||void 0===a?void 0:a.username]}),Object(C.jsx)(xe,{})]})]}),Object(C.jsx)(ge,{socials:a}),Object(C.jsx)(ye,{})]})},Me=a(43),Ie=a.n(Me);var ke=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.application.loading}));return Object(g.useEffect)((function(){e((function(e){e({type:"load/profile/start"}),fetch("https://api.intocode.ru:8001/api/profile").then((function(e){return e.json()})).then((function(t){e({type:"load/profile/success",payload:t})}))}))}),[e]),!t&&Object(C.jsx)("div",{className:Ie.a.appWrapper,children:Object(C.jsx)(p.a,{children:Object(C.jsxs)(x.a,{path:"/:_id?",children:[Object(C.jsx)(W,{}),Object(C.jsx)(fe,{}),Object(C.jsx)(Ne,{})]})})})};a(63);c.a.render(Object(C.jsx)(i.a,{store:v,children:Object(C.jsx)(ke,{})}),document.getElementById("root")),n()},7:function(e,t,a){e.exports={myProfile:"style_myProfile__2z23o",profileOpen:"style_profileOpen__AS_5n",profileClose:"style_profileClose__2qTqg",profileNameEmail:"style_profileNameEmail__1t8YA",profileName:"style_profileName__1HFas",nick:"style_nick__1G4Gh",profileContactIcons:"style_profileContactIcons__jbBEL",envelope:"style_envelope__3Ns1P",phone:"style_phone__ssOoo",videoCam:"style_videoCam__27Fqm",profileSocial:"style_profileSocial__3zshX",headSocial:"style_headSocial__3s1rN",messenger:"style_messenger__113Js",wrapMessenger:"style_wrapMessenger__3NZ_s",instagram:"style_instagram__1aN50",twitter:"style_twitter__1ejdo",IconsAndSocialNickname:"style_IconsAndSocialNickname__ToU2N",socialNickname:"style_socialNickname__1nC0v",headMedia:"style_headMedia__122a0",ImgPdfMedia:"style_ImgPdfMedia__lerDg",imgMedia:"style_imgMedia__3cSQd",pdf:"style_pdf__3TQmo"}}},[[64,1,2]]]);
//# sourceMappingURL=main.f410470b.chunk.js.map